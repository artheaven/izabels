# üöÇ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é Backend –Ω–∞ Railway

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ú–æ–Ω–æ—Ä–µ–ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–Ω–æ—Ä–µ–ø–æ (backend + frontend –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏). Railway –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.

---

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app/)
2. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Deploy from GitHub repo"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **artheaven/izabels**

### –®–∞–≥ 2: ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Root Directory

Railway –ø—ã—Ç–∞–µ—Ç—Å—è –¥–µ–ø–ª–æ–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç, –Ω–æ –Ω–∞–º –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ backend.

1. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings**
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Source"**
3. –í –ø–æ–ª–µ **"Root Directory"** –≤–≤–µ–¥–∏—Ç–µ: `backend`
4. –ù–∞–∂–º–∏—Ç–µ **Save**

```
Root Directory: backend
```

‚ö†Ô∏è **–ë–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ Railway –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç!**

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL

1. –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **"New Service"** –∏–ª–∏ **"+ New"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"Database" ‚Üí "PostgreSQL"**
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. PostgreSQL service –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ Build/Start –∫–æ–º–∞–Ω–¥

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∫–æ–º–∞–Ω–¥—ã –∏–∑ `package.json`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

**–í Settings ‚Üí Deploy:**
- **Build Command:** `npm install && npm run build`
- **Start Command:** `npm start`

–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–æ—Å—å, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é.

### –®–∞–≥ 5: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables** –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```bash
# DATABASE_URL —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ PostgreSQL service

NODE_ENV=production

# JWT Secret - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É
JWT_SECRET=<–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –Ω–∏–∂–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏>

# Frontend URL - –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –∑–∞–ø–æ–ª–Ω–∏–º –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Vercel
FRONTEND_URL=

# Admin credentials –¥–ª—è seed
ADMIN_USERNAME=admin
ADMIN_PASSWORD=<–ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å>
ADMIN_EMAIL=admin@izabels.bg

# Upload settings
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT_SECRET:**
```bash
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω: https://www.browserling.com/tools/random-hex

### –®–∞–≥ 6: Deploy

1. –ù–∞–∂–º–∏—Ç–µ **"Deploy"** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
2. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (3-5 –º–∏–Ω—É—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–µ —ç—Ç–∞–ø—ã:**
```
‚úì Cloning repository
‚úì Installing dependencies (npm install)
‚úì Running postinstall (prisma generate)
‚úì Building (npm run build / tsc)
‚úì Starting server (npm start)
```

### –®–∞–≥ 7: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Networking**
2. –ù–∞–∂–º–∏—Ç–µ **"Generate Domain"**
3. Railway —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL
   - –ü—Ä–∏–º–µ—Ä: `izabels-backend-production.up.railway.app`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç URL (–Ω—É–∂–µ–Ω –¥–ª—è Vercel)

### –®–∞–≥ 8: –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π Prisma

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Railway CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI:
   ```bash
   npm i -g @railway/cli
   ```

2. –ó–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å:
   ```bash
   railway login
   ```

3. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   cd /Users/user/izabels/backend
   railway link
   ```
   –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞.

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
   ```bash
   railway run npx prisma migrate deploy
   ```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ seed (—Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞):
   ```bash
   railway run npx prisma db seed
   ```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Custom Start Command (–≤—Ä–µ–º–µ–Ω–Ω–æ)**

1. –í Railway ‚Üí Settings ‚Üí Deploy
2. –ò–∑–º–µ–Ω–∏—Ç–µ **Start Command** –Ω–∞:
   ```bash
   npx prisma migrate deploy && npm start
   ```
3. Redeploy –ø—Ä–æ–µ–∫—Ç
4. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤–µ—Ä–Ω–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ: `npm start`

### –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Railway URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-railway-domain.railway.app/
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{
  "message": "Izabels Flower Shop API",
  "version": "1.0.0",
  "endpoints": {
    "admin": "/api/admin/*",
    "auth": "/api/auth/*",
    ...
  }
}
```

---

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "There was an error deploying from source"

**–ü—Ä–∏—á–∏–Ω–∞:** Railway –Ω–µ –Ω–∞—à–µ–ª –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ **Root Directory = backend** –≤ Settings
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `backend/package.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `backend/package-lock.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. ‚úÖ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Redeploy

### –û—à–∏–±–∫–∞: "Cannot find module '@prisma/client'"

**–ü—Ä–∏—á–∏–Ω–∞:** Prisma generate –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `package.json` –µ—Å—Ç—å:
   ```json
   "postinstall": "prisma generate"
   ```
2. Redeploy –ø—Ä–æ–µ–∫—Ç
3. –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Railway CLI:
   ```bash
   railway run npx prisma generate
   ```

### –û—à–∏–±–∫–∞: "Port 5001 is already in use"

**–ü—Ä–∏—á–∏–Ω–∞:** –•–∞—Ä–¥–∫–æ–¥ –ø–æ—Ä—Ç–∞ –≤ –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `src/server.ts`:
```typescript
const PORT = process.env.PORT || 5001;
```

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `PORT` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### –û—à–∏–±–∫–∞: "Database connection failed"

**–ü—Ä–∏—á–∏–Ω—ã:**
1. PostgreSQL service –Ω–µ –∑–∞–ø—É—â–µ–Ω
2. DATABASE_URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PostgreSQL service –∑–∞–ø—É—â–µ–Ω (–∑–µ–ª–µ–Ω—ã–π —Å—Ç–∞—Ç—É—Å)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –≤ Variables
3. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ Railway

### –û—à–∏–±–∫–∞: "Build failed - TypeScript errors"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
cd backend
npm run build

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ
```

### –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: "Server started" –Ω–æ —Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** Server –Ω–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ö–æ—Å—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ `src/server.ts`:
```typescript
const HOST = process.env.HOST || '0.0.0.0';
app.listen(Number(PORT), HOST, () => {
  // ...
});
```

### CORS errors –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–ü—Ä–∏—á–∏–Ω–∞:** `FRONTEND_URL` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è frontend –Ω–∞ Vercel
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Vercel URL
3. –í Railway ‚Üí Variables –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   FRONTEND_URL=https://your-vercel-domain.vercel.app
   ```
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
1. Railway Dashboard ‚Üí Your Service
2. –í–∫–ª–∞–¥–∫–∞ **"Deployments"**
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
4. **"View Logs"**

### –ú–µ—Ç—Ä–∏–∫–∏:
- CPU usage
- Memory usage
- Network traffic
- –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ Railway Dashboard

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ:

1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –≤ GitHub:
   ```bash
   git add .
   git commit -m "Update backend"
   git push origin main
   ```

2. Railway **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π

3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–æ: Uploads

Railway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **ephemeral filesystem** - –≤—Å–µ —Ñ–∞–π–ª—ã –≤ `/uploads` –±—É–¥—É—Ç —É–¥–∞–ª—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞!

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ Cloudinary:**
–°–º. `DEPLOYMENT_GUIDE.md` ‚Üí —Ä–∞–∑–¥–µ–ª "–ö—Ä–∏—Ç–∏—á–Ω–æ: –ü—Ä–æ–±–ª–µ–º–∞ —Å Uploads"

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Railway Docs:** https://docs.railway.app/
- **Railway CLI:** https://docs.railway.app/develop/cli
- **Prisma Deploy:** https://www.prisma.io/docs/guides/deployment/deployment-guides/deploying-to-railway

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 26.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0

